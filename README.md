**AWS Lambda Retry and Dead Letter Queue Handling**
Overview
This AWS Lambda function is designed to process events, with a specific focus on handling retries and utilizing a Dead Letter Queue (DLQ) for failed events. The function interacts with Amazon Simple Queue Service (SQS) for event processing.

Lambda Function Structure
The Lambda function is structured as follows:

Configuration and Logging Setup
Import necessary modules (json, boto3, logging, time).
Configure logging for the function.
python
```
import json
import boto3
import logging
import time
```

# Configure logging
```
logger = logging.getLogger()
logger.setLevel(logging.INFO)
```
Message Deletion from Queue
Define a function delete_message_from_queue(queue_url) to delete a message from an SQS queue.
```
def delete_message_from_queue(queue_url):
    # Implementation details...
```
Parameter Store Interaction
Define a function get_max_retries_from_parameter_store() to retrieve the maximum number of retries allowed from AWS Systems Manager Parameter Store.
```
def get_max_retries_from_parameter_store():
    # Implementation details...
```
Dead Letter Queue (DLQ) Setup
Define a function get_dlq_url() to provide the DLQ URL directly.
```
def get_dlq_url():
    # Implementation details...
```
Sending Event to DLQ
Define a function send_to_dlq(event) to send an event to the Dead Letter Queue.
```
def send_to_dlq(event):
    # Implementation details...
```
Sending Event to SQS with Retry Handling
Define a function send_event_to_sqs(event, retry_count) to send an event back to the SQS queue with updated retry count.
```
def send_event_to_sqs(event, retry_count):
    # Implementation details...
```
Lambda Handler Function
Define the main Lambda handler function lambda_handler(event, context) to process the incoming events.
```
def lambda_handler(event, context):
    try:
        # Event processing logic...

        return {
            'statusCode': 200,
            'body': json.dumps('Process completed successfully!')
        }

    except Exception as e:
        # Error handling and retry logic...

        return {
            'statusCode': 500,
            'body': json.dumps('Error occurred. See logs for details.')
        }
```
Usage
**Lambda Trigger**

Configure an event source to trigger the Lambda function, ensuring the events have the expected structure for CustomEvent.

**Parameter Store Configuration**

Set up the AWS Systems Manager Parameter Store with the parameter /your/parameter/store/max_retries to define the maximum number of allowed retries.
**SQS Configuration**

Set up the primary SQS queue (primarysqs) for normal event processing and the Dead Letter Queue (DLQ1) for failed events.

**Logging**

Monitor CloudWatch Logs for detailed logs generated by the Lambda function.

**Notes**

The function handles event processing, retries, and DLQ migration for events that exceed the maximum allowed retries.
Adjust the sleep time and retry logic based on your specific use case and requirements.
